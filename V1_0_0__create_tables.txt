CREATE TABLE
    IF NOT EXISTS payment
  (
     id               SERIAL NOT NULL,
     status           VARCHAR(255) NOT NULL,
     value            NUMERIC(15, 4) DEFAULT 0 NOT NULL,
     dateTimeCreation TIMESTAMP NOT NULL,
     dateTimeEnd      TIMESTAMP,
     orderid          VARCHAR(255) NOT NULL,
     userid           VARCHAR(255) NOT NULL,
     PRIMARY KEY (id)
  );

CREATE TABLE
    IF NOT EXISTS card
  (
     id               SERIAL NOT NULL,
     userid           VARCHAR(255) NOT NULL,
     status           BOOLEAN DEFAULT 'true' NOT NULL,
     NAME             VARCHAR(255) NOT NULL,
     cardNumber       VARCHAR(16) NOT NULL,
     expirationDate   VARCHAR(6) NOT NULL,
     cvv              VARCHAR(4) NOT NULL,
     dateTimeCreation TIMESTAMP NOT NULL,
     PRIMARY KEY (id)
  );

CREATE TABLE
    IF NOT EXISTS paymentitem
  (
     id                   SERIAL NOT NULL,
     totalCardInstallment INT4 DEFAULT 1 NOT NULL,
     value                NUMERIC(15, 4) NOT NULL,
     dateTimeCreation     TIMESTAMP NOT NULL,
     paymentid            INT4,
     cardid               INT4,
     PRIMARY KEY (id)
  );

ALTER TABLE paymentitem
  ADD CONSTRAINT fk_payment_itens FOREIGN KEY (paymentid) REFERENCES payment (id);

ALTER TABLE paymentitem
  ADD CONSTRAINT fk_card_paymentitens FOREIGN KEY (cardid) REFERENCES card (id);